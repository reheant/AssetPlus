class UserAccount {
  abstract;
  unique String email;
  String password;
  lazy String name;
  lazy String phoneNumber;
  
  
}

class GuestAccount {
  isA UserAccount;
}

class MaintenanceAccount {
  abstract;
  isA UserAccount;
  * assignedStaff -- * MaintenanceTicket assignedTickets;
}

class ManagerAccount {
  isA MaintenanceAccount;
  String email = "manager@ap.com";
}

class EmployeeAccount {
  isA MaintenanceAccount;
}

enum TimeEstimate {
  lessThanOneDay,
  betweenOneAndThreeDays,
  betweenOneAndSevenDays,
  betweenOneAndThreeWeeks,
  moreThanThreeWeeks
}

enum TicketStatus {
  open,
  resolved,
  closed
}

enum TicketPriority {
  low,
  normal,
  urgent
}

class AssetPlus {
  1 <@>- * UserAccount userAccounts;
  1 <@>- * Location locations;
  1 <@>- * Asset assets;
  1 <@>- * AssetType assetTypes;
  1 <@>- * MaintenanceTicket tickets;
}

class AssetType {
  String name;
}

class Asset {
  Date purchaseDate;
  Integer expectedLifespanDays;
  autounique uniqueNumber;
  
  * assets -- 1 AssetType type;
}

class MaintenanceTicket {
  String description;
  autounique id;
  TicketStatus status;
  Date creationDate;
  
  * tickets -- 0..1 Asset asset;
  1 ticket -- * MaintenanceNote progressNotes;
  1 ticket -- * ImageLink images;
}

class MaintenanceNote {
  String content;
  Date date;
}

class ImageLink {
  String url;
}

class Location {
}

class FloorLocation {
  isA Location;
  Integer floorNumber;
  
  1 floor -- * RoomLocation rooms;
}

class RoomLocation {
  isA Location;
  Integer roomNumber;
}

associationClass TicketAssignment {
  * MaintenanceTicket;
  * MaintenanceAccount;
  boolean requiresManagerApproval;
  TicketPriority priority;
  TimeEstimate timeEstimate;
}





